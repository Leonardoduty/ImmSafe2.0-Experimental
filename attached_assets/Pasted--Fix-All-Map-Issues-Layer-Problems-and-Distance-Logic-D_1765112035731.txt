ğŸ”¥ Fix All Map Issues, Layer Problems, and Distance Logic (Do NOT change design)

I am building a global humanitarian routing web app.
Please fix these specific issues in my existing code without changing any of the design/UI layout.

1. Fix Auto Zoom / Route Visibility

Current problems:

Short routes (example: Kabul â†’ Islamabad) zoom in too close and I cannot see both countries.

Some routes (example: Kabul â†’ Mazar-i-Sharif) stretch the map and distort the entire view.

What I want:

âœ” Use Leafletâ€™s fitBounds(routeBounds, { padding: [50, 50] }) to make the entire route + surrounding areas fully visible.
âœ” Automatically zoom OUT when routes are short, so the map always shows both countries clearly.
âœ” Completely remove any custom zoom/center logic that overrides fitBounds.
âœ” Prevent ANY map distortion.

2. Fix Map Layers (Safe Zones, Conflict Zones, Water Points)

Current problems:

Layers appear only around Gaza & Israel.

Layers do NOT appear globally.

Layers overlap each other and stack incorrectly.

Some layers donâ€™t show at all.

What I want:

âœ” Make all layers work globally, not region-limited.
âœ” Add proper layer groups and z-index ordering so layers never overlap weirdly.
âœ” Ensure the Toggle Layer buttons actually toggle visibility.
âœ” Provide fallback data globally if regional data is missing.
âœ” Keep all UI/design exactly the same.

3. Add Country Borders + Physical Map Option

I want the map to show:

âœ” Real country borders (use OSM / geojson borders layer)
âœ” A tile option for terrain/physical map (OpenTopoMap or CartoDB)
âœ” Keep the existing map style as the default.
âœ” Add toggle buttons for Borders + Terrain if needed.

4. Fix Dynamic Distance in Checklist

Current problem:

The checklist always shows â€œ45 kmâ€ even when the actual route is different.

What I want:

âœ” Use the real route distance returned by the routing engine
âœ” Replace the hardcoded â€œ45 kmâ€ value with dynamic km
âœ” The checklist must automatically update after every route search

Example:

Route distance = 17.7 km â†’ checklist must say 17.7 km

Route distance = 240 km â†’ checklist must say 240 km

5. Preserve Everything Else

âš ï¸ VERY IMPORTANT:

Do NOT redesign anything

Do NOT change UI

Do NOT change layout

Only fix functionality

Leave CSS and styling untouched

Your task is ONLY:

âœ” Fix map zoom + distortion
âœ” Fix global layers
âœ” Add borders + terrain
âœ” Fix checklist distance
âœ” Improve routing accuracy

Make the changes directly inside the correct components and ensure everything still runs on Next.js.

âœ”ï¸ END OF PROMPT